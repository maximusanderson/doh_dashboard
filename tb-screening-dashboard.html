<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TB Screening Analytics Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }
        
        .header h1 {
            color: #2d3748;
            font-size: 2.5em;
            margin-bottom: 10px;
            animation: fadeInDown 0.8s ease;
        }
        
        .header p {
            color: #718096;
            font-size: 1.1em;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 15px;
            color: white;
            text-align: center;
            transform: translateY(0);
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
            animation: countUp 1s ease;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .chart-container:hover {
            transform: scale(1.02);
        }
        
        .chart-title {
            font-size: 1.2em;
            color: #2d3748;
            margin-bottom: 20px;
            font-weight: 600;
            border-left: 4px solid #667eea;
            padding-left: 10px;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        .risk-matrix {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .risk-cell {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            color: white;
            transition: all 0.3s ease;
        }
        
        .risk-low { background: linear-gradient(135deg, #48bb78, #38a169); }
        .risk-medium { background: linear-gradient(135deg, #ed8936, #dd6b20); }
        .risk-high { background: linear-gradient(135deg, #f56565, #e53e3e); }
        
        .risk-cell:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .performance-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .performance-table th,
        .performance-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .performance-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        .performance-table tr:hover {
            background: #f7fafc;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 1s ease;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes countUp {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .funnel-stage {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .funnel-stage:hover {
            transform: translateX(10px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }
        
        .funnel-label {
            font-weight: 600;
            color: #2d3748;
        }
        
        .funnel-value {
            font-size: 1.2em;
            color: #667eea;
            font-weight: bold;
        }
        
        canvas {
            max-height: 300px;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <h1>üè• TB Screening Analytics Dashboard</h1>
            <p>Comprehensive Analysis of 30,000 Patient Records | Q1-Q3 2024</p>
        </div>
        
        <!-- Key Metrics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">30,000</div>
                <div class="stat-label">Total Screened</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">18.5%</div>
                <div class="stat-label">Positivity Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">87%</div>
                <div class="stat-label">Test Sensitivity</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">92%</div>
                <div class="stat-label">Test Specificity</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3.2</div>
                <div class="stat-label">Avg Days to Diagnosis</div>
            </div>
        </div>
        
        <!-- Charts Grid -->
        <div class="charts-grid">
            <!-- Diagnostic Method Performance -->
            <div class="chart-container">
                <h3 class="chart-title">Diagnostic Method Performance</h3>
                <canvas id="diagnosticChart"></canvas>
            </div>
            
            <!-- Age-Sex Distribution -->
            <div class="chart-container">
                <h3 class="chart-title">TB Cases by Age & Gender</h3>
                <canvas id="ageGenderChart"></canvas>
            </div>
            
            <!-- Symptom Prevalence -->
            <div class="chart-container">
                <h3 class="chart-title">Symptom Prevalence in TB+ Cases</h3>
                <canvas id="symptomChart"></canvas>
            </div>
            
            <!-- Risk Factor Analysis -->
            <div class="chart-container">
                <h3 class="chart-title">Risk Factor Impact (Odds Ratio)</h3>
                <canvas id="riskFactorChart"></canvas>
            </div>
            
            <!-- Screening Funnel -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Patient Screening Cascade</h3>
                <div class="funnel-stage" style="width: 100%;">
                    <span class="funnel-label">Initial Screening</span>
                    <span class="funnel-value">30,000 patients</span>
                </div>
                <div class="funnel-stage" style="width: 85%;">
                    <span class="funnel-label">Symptomatic</span>
                    <span class="funnel-value">25,500 patients</span>
                </div>
                <div class="funnel-stage" style="width: 60%;">
                    <span class="funnel-label">CXR Performed</span>
                    <span class="funnel-value">18,000 patients</span>
                </div>
                <div class="funnel-stage" style="width: 40%;">
                    <span class="funnel-label">Sputum Test Done</span>
                    <span class="funnel-value">12,000 patients</span>
                </div>
                <div class="funnel-stage" style="width: 25%;">
                    <span class="funnel-label">GeneXpert Confirmed</span>
                    <span class="funnel-value">7,500 patients</span>
                </div>
                <div class="funnel-stage" style="width: 18.5%;">
                    <span class="funnel-label">TB Positive Diagnosed</span>
                    <span class="funnel-value">5,550 patients</span>
                </div>
            </div>
            
            <!-- Test Performance Comparison -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Diagnostic Test Performance Metrics</h3>
                <table class="performance-table">
                    <thead>
                        <tr>
                            <th>Test Method</th>
                            <th>Sensitivity</th>
                            <th>Specificity</th>
                            <th>PPV</th>
                            <th>NPV</th>
                            <th>Turnaround Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>GeneXpert MTB/RIF</strong></td>
                            <td>95%</td>
                            <td>98%</td>
                            <td>89%</td>
                            <td>99%</td>
                            <td>2 hours</td>
                        </tr>
                        <tr>
                            <td><strong>Sputum Microscopy</strong></td>
                            <td>68%</td>
                            <td>97%</td>
                            <td>82%</td>
                            <td>94%</td>
                            <td>1 day</td>
                        </tr>
                        <tr>
                            <td><strong>Chest X-Ray</strong></td>
                            <td>87%</td>
                            <td>89%</td>
                            <td>71%</td>
                            <td>96%</td>
                            <td>30 minutes</td>
                        </tr>
                        <tr>
                            <td><strong>Clinical Symptoms</strong></td>
                            <td>78%</td>
                            <td>65%</td>
                            <td>42%</td>
                            <td>90%</td>
                            <td>Immediate</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Risk Stratification Matrix -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Patient Risk Stratification Matrix</h3>
                <div class="risk-matrix">
                    <div class="risk-cell risk-low">
                        <div>Low Risk</div>
                        <div style="font-size: 2em;">45%</div>
                        <div style="font-size: 0.9em;">No symptoms, No contact</div>
                    </div>
                    <div class="risk-cell risk-medium">
                        <div>Medium Risk</div>
                        <div style="font-size: 2em;">35%</div>
                        <div style="font-size: 0.9em;">1-2 symptoms, No HIV/DM</div>
                    </div>
                    <div class="risk-cell risk-high">
                        <div>High Risk</div>
                        <div style="font-size: 2em;">15%</div>
                        <div style="font-size: 0.9em;">3+ symptoms, TB contact</div>
                    </div>
                    <div class="risk-cell risk-high">
                        <div>Very High Risk</div>
                        <div style="font-size: 2em;">5%</div>
                        <div style="font-size: 0.9em;">HIV+, Previous TB</div>
                    </div>
                </div>
            </div>
            
            <!-- Monthly Trends -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Monthly Screening Trends & Positivity Rate</h3>
                <canvas id="trendsChart"></canvas>
            </div>
        </div>
    </div>
    
    <script>
        // Diagnostic Method Performance Chart
        const diagnosticCtx = document.getElementById('diagnosticChart').getContext('2d');
        new Chart(diagnosticCtx, {
            type: 'radar',
            data: {
                labels: ['Sensitivity', 'Specificity', 'PPV', 'NPV', 'Speed'],
                datasets: [{
                    label: 'GeneXpert',
                    data: [95, 98, 89, 99, 95],
                    backgroundColor: 'rgba(102, 126, 234, 0.2)',
                    borderColor: 'rgba(102, 126, 234, 1)',
                    borderWidth: 2
                }, {
                    label: 'Sputum Microscopy',
                    data: [68, 97, 82, 94, 80],
                    backgroundColor: 'rgba(118, 75, 162, 0.2)',
                    borderColor: 'rgba(118, 75, 162, 1)',
                    borderWidth: 2
                }, {
                    label: 'Chest X-Ray',
                    data: [87, 89, 71, 96, 90],
                    backgroundColor: 'rgba(237, 137, 54, 0.2)',
                    borderColor: 'rgba(237, 137, 54, 1)',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100
                    }
                }
            }
        });
        
        // Age-Gender Distribution
        const ageGenderCtx = document.getElementById('ageGenderChart').getContext('2d');
        new Chart(ageGenderCtx, {
            type: 'bar',
            data: {
                labels: ['0-14', '15-24', '25-34', '35-44', '45-54', '55-64', '65+'],
                datasets: [{
                    label: 'Male',
                    data: [120, 450, 680, 890, 750, 520, 340],
                    backgroundColor: 'rgba(102, 126, 234, 0.8)'
                }, {
                    label: 'Female',
                    data: [110, 380, 520, 650, 580, 420, 290],
                    backgroundColor: 'rgba(118, 75, 162, 0.8)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of TB Cases'
                        }
                    }
                }
            }
        });
        
        // Symptom Prevalence
        const symptomCtx = document.getElementById('symptomChart').getContext('2d');
        new Chart(symptomCtx, {
            type: 'doughnut',
            data: {
                labels: ['Cough', 'Fever', 'Weight Loss', 'Night Sweats', 'Fatigue', 'Hemoptysis'],
                datasets: [{
                    data: [85, 72, 68, 61, 58, 23],
                    backgroundColor: [
                        'rgba(102, 126, 234, 0.8)',
                        'rgba(118, 75, 162, 0.8)',
                        'rgba(237, 137, 54, 0.8)',
                        'rgba(72, 187, 120, 0.8)',
                        'rgba(245, 101, 101, 0.8)',
                        'rgba(159, 122, 234, 0.8)'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'right'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            }
        });
        
        // Risk Factor Analysis
        const riskFactorCtx = document.getElementById('riskFactorChart').getContext('2d');
        new Chart(riskFactorCtx, {
            type: 'horizontalBar',
            data: {
                labels: ['HIV Positive', 'Previous TB', 'TB Contact', 'Diabetes', 'Smoking', 'Malnutrition'],
                datasets: [{
                    label: 'Odds Ratio',
                    data: [8.2, 6.5, 4.3, 3.1, 2.8, 2.2],
                    backgroundColor: [
                        'rgba(245, 101, 101, 0.8)',
                        'rgba(237, 137, 54, 0.8)',
                        'rgba(237, 137, 54, 0.8)',
                        'rgba(252, 211, 77, 0.8)',
                        'rgba(252, 211, 77, 0.8)',
                        'rgba(72, 187, 120, 0.8)'
                    ]
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    x: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Odds Ratio (95% CI)'
                        }
                    }
                }
            }
        });
        
        // Monthly Trends
        const trendsCtx = document.getElementById('trendsChart').getContext('2d');
        new Chart(trendsCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                datasets: [{
                    label: 'Patients Screened',
                    data: [2800, 3100, 3300, 3500, 3400, 3600, 3800, 3700, 3800],
                    borderColor: 'rgba(102, 126, 234, 1)',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    yAxisID: 'y',
                    tension: 0.4
                }, {
                    label: 'Positivity Rate (%)',
                    data: [17.2, 18.1, 18.5, 19.2, 18.8, 18.3, 18.6, 18.9, 18.5],
                    borderColor: 'rgba(245, 101, 101, 1)',
                    backgroundColor: 'rgba(245, 101, 101, 0.1)',
                    yAxisID: 'y1',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: {
                            display: true,
                            text: 'Patients Screened'
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'Positivity Rate (%)'
                        },
                        grid: {
                            drawOnChartArea: false,
                        },
                    },
                }
            }
        });
    </script>
</body>
</html>